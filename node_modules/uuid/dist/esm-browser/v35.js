<<<<<<< HEAD
import stringify from './stringify.js';
=======
import { unsafeStringify } from './stringify.js';
>>>>>>> 4c7927c56ac2f87c4afe89ee3de895e31c27c511
import parse from './parse.js';

function stringToBytes(str) {
  str = unescape(encodeURIComponent(str)); // UTF8 escape

<<<<<<< HEAD
  var bytes = [];

  for (var i = 0; i < str.length; ++i) {
=======
  const bytes = [];

  for (let i = 0; i < str.length; ++i) {
>>>>>>> 4c7927c56ac2f87c4afe89ee3de895e31c27c511
    bytes.push(str.charCodeAt(i));
  }

  return bytes;
}

<<<<<<< HEAD
export var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';
export var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';
export default function (name, version, hashfunc) {
  function generateUUID(value, namespace, buf, offset) {
=======
export const DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';
export const URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';
export default function v35(name, version, hashfunc) {
  function generateUUID(value, namespace, buf, offset) {
    var _namespace;

>>>>>>> 4c7927c56ac2f87c4afe89ee3de895e31c27c511
    if (typeof value === 'string') {
      value = stringToBytes(value);
    }

    if (typeof namespace === 'string') {
      namespace = parse(namespace);
    }

<<<<<<< HEAD
    if (namespace.length !== 16) {
=======
    if (((_namespace = namespace) === null || _namespace === void 0 ? void 0 : _namespace.length) !== 16) {
>>>>>>> 4c7927c56ac2f87c4afe89ee3de895e31c27c511
      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');
    } // Compute hash of namespace and value, Per 4.3
    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =
    // hashfunc([...namespace, ... value])`


<<<<<<< HEAD
    var bytes = new Uint8Array(16 + value.length);
=======
    let bytes = new Uint8Array(16 + value.length);
>>>>>>> 4c7927c56ac2f87c4afe89ee3de895e31c27c511
    bytes.set(namespace);
    bytes.set(value, namespace.length);
    bytes = hashfunc(bytes);
    bytes[6] = bytes[6] & 0x0f | version;
    bytes[8] = bytes[8] & 0x3f | 0x80;

    if (buf) {
      offset = offset || 0;

<<<<<<< HEAD
      for (var i = 0; i < 16; ++i) {
=======
      for (let i = 0; i < 16; ++i) {
>>>>>>> 4c7927c56ac2f87c4afe89ee3de895e31c27c511
        buf[offset + i] = bytes[i];
      }

      return buf;
    }

<<<<<<< HEAD
    return stringify(bytes);
=======
    return unsafeStringify(bytes);
>>>>>>> 4c7927c56ac2f87c4afe89ee3de895e31c27c511
  } // Function#name is not settable on some platforms (#270)


  try {
    generateUUID.name = name; // eslint-disable-next-line no-empty
  } catch (err) {} // For CommonJS default export support


  generateUUID.DNS = DNS;
  generateUUID.URL = URL;
  return generateUUID;
}